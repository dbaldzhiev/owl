# OWL â€” Technical Requirements Document (TRD)

Target Platform: Rhino 8 / Grasshopper (Python 3 Script)
Language: Python 3
API: RhinoCommon
Domain: Auditoriums, Cinemas, Grandstands, Tribune Renovation

---

## 0. Core Design Principle
The plugin is structured as a single Python script (`tribune.py`) containing modular classes that mimic a node-based workflow.

Data flows: `Setup Objects` -> `Solver` -> `Geometry/Data Profiles`.

---

## 1. Components & Data Structures

### 1.1 Tribune Setup
**Component Name:** `tribune`
**Purpose:** Define the base dimensions and stepping logic of the tribune.

**Inputs:**
- `rows` (int): Number of elevated rows.
- `row_width` (float): Width/Depth of a single row module.
- `elev` (list[int]): List of step counts per row (e.g., [2, 2, 2] means each row rises by 2 steps).

**Outputs:**
- `tribune_setup`: A data object containing the above configuration.

### 1.2 Stairs Setup
**Component Name:** `stairs`
**Purpose:** Define the dimensions of the steps (risers and treads).

**Inputs:**
- `tread_h` (float): Height of one riser.
- `tread_w` (float): Depth of one tread step.

**Outputs:**
- `stair_setup`: A data object containing step dimensions.

### 1.3 Railings Setup
**Component Name:** `railings`
**Purpose:** Define railing dimensions.

**Inputs:**
- `rail_h` (float): Height of the railing above the nose of the tread.
- `rail_w` (float): Width/Thickness of the railing.

**Outputs:**
- `rail_setup`: A data object containing railing dimensions.

### 1.4 Tribune Solver
**Component Name:** `tribune_solver`
**Purpose:** Generate the 3D profile curves based on the setup objects.

**Inputs:**
- `tribune_setup`
- `stair_setup`
- `rail_setup`

**Outputs:**
- `tribune_profile` (Curve): The section profile of the seating area.
- `stairs_profile` (Curve): The section profile of the aisle/stairs.
- `railings_profile` (List[Curve]): Profiles for each railing.
- `gaps` (float): Free gap calculation (e.g., between railing and stair nosing).

---

## 2. Placeholder Components

### 2.1 Audience
**Purpose:** Define occupant parameters (eye height, head height).
**Status:** Placeholder.

### 2.2 Screen
**Purpose:** Define cinema screen geometry (width, height, curvature).
**Status:** Placeholder.

### 2.3 Projector
**Purpose:** Define projector location and cone.
**Status:** Placeholder.

### 2.4 Analysis
**Purpose:** Calculate C-values and sightlines.
**Status:** Placeholder.

---

## 3. Geometry Logic (Solver)

- **Tribune Profile:**
    - Starts at (0,0,0).
    - Advances by `row_width`.
    - Rises by `elev[row] * tread_h`.
    - Must act as a "Trend" line for the stairs.

- **Stairs Profile:**
    - Typically aligned to the tribune but broken down into `tread_w` and `tread_h` steps.
    - Start point may need adjustment to align risers correctly with tribune rows.

- **Railings:**
    - Placed at every major row riser.
    - Height `rail_h` measured from the *next* tread elevation.
    - Thickness `rail_w` extends *inwards* onto the current tread.

---

## 4. Coding Standards

- **Python 3** features (type hinting, dataclasses) are encouraged.
- **RhinoCommon** (`import Rhino.Geometry as rg`) is the only geometry library.
- No external dependencies (pip packages) unless standard library.
